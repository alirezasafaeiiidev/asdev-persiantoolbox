# PTB-ARC-003 — معماری ابزارهای تخصصی پولی (Premium / Pro)

## هدف
طراحی مسیر درآمدی بدون ضربه به اصل Local‑First ابزارهای رایگان، با این شروط:
- ابزارهای عمومی رایگان و آفلاین باقی بمانند.
- ابزارهای تخصصی پولی بتوانند:
  - دسترسی کنترل‌شده داشته باشند
  - در حالت آفلاین قابل استفاده نباشند (یا فقط دمو)

## اصل امنیتی
اگر هسته محاسبه Premium روی کلاینت باشد، “آفلاین نشدن” قابل تضمین نیست.
بنابراین برای Pro:
- **Server-side Compute** توصیه می‌شود (اجباری برای ۱۰/۱۰).

## طراحی مسیرها
- ابزارهای رایگان: `/tools/...`
- ابزارهای Pro: `/pro/...` (Route group جدا)

## سیاست سرویس‌ورکر (اجباری)
- `/pro/*` باید Network‑Only باشد.
- هیچ asset اختصاصی Pro نباید در Shell cache قرار بگیرد.
- آفلاین: نمایش صفحه “این ابزار نیازمند اینترنت و دسترسی معتبر است.”

## کنترل دسترسی (دو سطح)
### سطح 1 — Demo Mode (سریع)
- Pro UI قابل مشاهده باشد ولی خروجی کامل تولید نشود.
- تعداد اجرا محدود (client-side counter) فقط برای تجربه دمو. (توجه: امنیت واقعی نیست.)

### سطح 2 — Real Access (پیشنهادی)
- احراز هویت سبک (OTP/Token) + مجوز دسترسی.
- هر درخواست محاسبه به سرور ارسال شود.
- توکن کوتاه‌عمر و قابل revoke باشد.

## معیار پذیرش
- در حالت آفلاین، `/pro/*` نباید خروجی واقعی بدهد.
- ابزارهای رایگان نباید با وجود Pro دچار وابستگی خارجی شوند.
- UX Pro واضح و بدون ابهام باشد (نیازمند اینترنت/پرداخت).
