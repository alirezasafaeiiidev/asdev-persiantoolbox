# PTB-LOG-002 — منطق ابزار حقوق (Salary) و Data‑Driven Laws

## هدف
ابزار حقوق باید مطابق قوانین/فرضیات مشخص و قابل بروزرسانی باشد و اعتماد کاربر را حفظ کند.

## اصل کلیدی
قوانین/نرخ‌ها باید **data-driven** باشند (از dataset داخلی/آپدیت‌شونده خوانده شوند)، نه hardcode در منطق.

## الزامات (باید)
1) قانون‌ها و نرخ‌ها در یک dataset نسخه‌بندی‌شده نگهداری شوند:
   - `version`
   - `effectiveFrom`
   - `effectiveTo` (اختیاری)
2) محاسبه مالیات باید قابلیت پلکانی (brackets) داشته باشد.
3) سقف بیمه و اقلام مشمول/غیرمشمول باید قابل پیکربندی باشند.
4) UI باید این موارد را نمایش دهد:
   - “آخرین بروزرسانی داده: <date>”
   - “منبع داده: <name>”
   - هشدار: خروجی جایگزین سند رسمی نیست.

## DataHub Integration
- کلاینت فقط از endpoint داخلی داده بگیرد.
- در stale بودن داده، پیام کوچک نمایش داده شود.
- در عدم وجود داده، ابزار با پیام توقف از دسترس خارج شود.

## تست‌ها
- سناریوهای واقعی (فیش حقوقی نمونه) به عنوان وکتور تست ثبت شود.
- هر تغییر dataset باید تست‌ها را پاس کند.

## معیار پذیرش
- بدون اینترنت جهانی، ابزار با آخرین داده cache کار کند.
- خروجی breakdown کامل ارائه شود.
- پیام‌های stale/disabled مطابق استاندارد باشد.
