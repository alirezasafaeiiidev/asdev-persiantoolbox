# PTB-LOG-001 — منطق ابزار وام (Loan) و صحت محاسبات

## هدف
خروجی وام باید دقیق، قابل توضیح، و قابل تست باشد.

## Scope
- قسط ثابت (annuity)
- محاسبه معکوس (اصل/نرخ/مدت از روی قسط)
- وام پلکانی (Stepped)

## استانداردها (باید)
1) تمام محاسبات باید واحد و rounding مشخص داشته باشند.
2) خروجی باید breakdown و مانده بدهی ماهانه داشته باشد (Amortization table).
3) وام پلکانی باید **واقعاً** پلکانی محاسبه شود:
   - تغییر نرخ/قسط/سقف در بازه‌های زمانی
   - محاسبه مانده اصل در هر ماه
   - تولید جدول ماهانه

## تست‌های طلایی
- حداقل 10 سناریوی ثابت با خروجی مورد انتظار ثبت شود.
- خروجی با یک محاسبه‌گر معتبر (مرجع داخلی) مقایسه شود.
- در صورت تغییر rounding، تست‌ها باید به‌روزرسانی کنترل‌شده داشته باشند.

## معیار پذیرش
- اختلاف خروجی در سناریوهای تست از آستانه تعریف‌شده عبور نکند.
- جدول اقساط قابل دانلود (CSV) ارائه شود.
